<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sig in</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <h1>Biblo Sig in</h1>

    <form method="POST" action="/SignIn">
      <label for="userName">Nombre de usuario:</label>
      <input type="text" id="userName" name="userName" />

      <label for="password">Contrase√±a:</label>
      <input type="password" id="password" name="password" />

      <button type="submit">Iniciar sesion</button>
    </form>

    <% if( typeof userFound !== 'undefined' && emailConfirmation !== 'undefined') { %>
      <div>
        <% if( userFound === false ) {%>
          <p><%= "Usuario no encontrado, por favor verifique los datos" %></p>
        <% } %>
      </div>

      <div>
        <% if( userFound === true && emailConfirmation === false ) {%>
          <p><%= "El usuario aun no ha confirmado su correo electronico, no puede continuar" %></p>
        <% } %>
      </div>

      <div>
        <% if( userFound === true && emailConfirmation === true ) {%>
          <p><%= "Todos los datos del usuario estan correctos, puede continuar" %></p>
        <% } %>
      </div>
    <% } %>

    <script>
      window.history.replaceState({ page: 'home' }, 'Home', '/');

      window.history.pushState({ page: 'error' }, 'Error', '/');

      window.addEventListener('popstate', (event) => {
        if (event.state && event.state.page === 'error') {
          window.location.href = '/';
        }
      });
    </script>
  </body>
</html>
